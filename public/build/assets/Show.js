import{F as x,S as B}from"./pagination.js";import{u as I}from"./app.js";import{_ as F,L as S,o as t,B as h,C as s,a,G as l,c as o,E as f,F as u,D as _,e as m,a6 as j,a5 as k,H as O,P as q,Q as z}from"./id.js";import{E as D}from"./index21.js";import{E as K}from"./index8.js";import{a as R,E as T}from"./index29.js";import{E as G}from"./index25.js";import{E as L}from"./index9.js";import"./index7.js";import"./typescript.js";import"./event.js";import"./index22.js";import"./index26.js";const M={components:{Flicking:x},data(){return{cart:I(),options:{align:"prev",defaultIndex:1,circular:!0},plugins:[],optionNav:{bound:!0,bounce:30,moveType:"freeScroll",align:"prev"},stock:0,form:{product_id:this.data.id,variant_id:this.data.variant[0].id,qty:1,price:this.data.variant[0].sell_price}}},props:{data:Object,grosir:Number},mounted(){this.plugins=[new B({type:"index",synchronizedFlickingOptions:[{flicking:this.$refs.flicking0,isSlidable:!0},{flicking:this.$refs.flicking1,isClickable:!0,activeClass:"active"}]})],this.variant_id=this.data.variant[0].id,this.calculateStock()},methods:{calculateStock(){this.data.variant.forEach((i,c)=>{this.grosir==1&&c>=1?this.stock+=i.stock:this.grosir==0&&c==0&&(this.stock+=i.stock)})},setVariantPrice(i){this.form.price=i},addCart(){this.$page.props.user?this.$inertia.form(this.form).post(this.route("cart.store"),{preserveScroll:!0,onSuccess:()=>{D({type:"success",message:"Produk berhasil Ditambahkan Ke Keranjang!"}),this.cart.fetchCart()}}):window.location=this.route("login")},onPaused(){console.log("## OnPaused")},onPlayed(){console.log("## OnPlayed")}}},b=i=>(q("data-v-5295934b"),i=i(),z(),i),U={class:"content"},H={class:"block rounded"},Q={class:"block-content p-4"},A=["src"],J={key:1,class:"flicking-panel has-background-primary"},W=b(()=>a("img",{class:"panel-image img-fluid",src:"/media/placeholder/product.png"},null,-1)),X=[W],Y=["src"],Z={key:1,class:"flicking-panel thumb has-background-primary"},$=b(()=>a("img",{class:"thumb-image",src:"/media/placeholder/product.png"},null,-1)),ee=[$],te={class:"product-info"},ae={class:"product-title"},se={class:""},oe={class:"product-price mb-4"},ie={class:"product-price_final"},ne={key:0,class:"mb-4"},le={class:"mb-4"},re=b(()=>a("i",{class:"fa fa-cart-plus me-2"},null,-1));function ce(i,c,n,de,r,p){const v=S("flicking"),g=K,y=T,E=R,V=G,w=O,C=L,P=S("base-layout");return t(),h(P,{title:n.data.name},{default:s(()=>[a("div",U,[l(C,{justify:"center"},{default:s(()=>[l(g,{lg:18},{default:s(()=>[a("div",H,[a("div",Q,[l(C,{gutter:20},{default:s(()=>[l(g,{lg:12},{default:s(()=>[l(v,{ref:"flicking0",options:{bounce:30},plugins:r.plugins},{default:s(()=>[n.data.variant.length?(t(!0),o(u,{key:0},f(n.data.variant,(e,d)=>(t(),o(u,null,[e.image!=null?(t(),o("div",{class:"flicking-panel thumb has-background-primary",key:d},[a("img",{class:"thumb-image",src:e.image},null,8,A)])):m("",!0)],64))),256)):(t(),o("div",J,X))]),_:1},8,["plugins"]),l(v,{class:"product-img-nav",ref:"flicking1",options:r.optionNav},{default:s(()=>[n.data.variant.length?(t(!0),o(u,{key:0},f(n.data.variant,(e,d)=>(t(),o(u,null,[e.image!=null?(t(),o("div",{class:"flicking-panel thumb has-background-primary",key:d},[a("img",{class:"thumb-image",src:e.image},null,8,Y)])):m("",!0)],64))),256)):(t(),o("div",Z,ee))]),_:1},8,["options"])]),_:1}),l(g,{lg:12},{default:s(()=>[a("div",te,[a("h2",ae,_(n.data.name),1),a("div",se," Stock Produk "+_(r.stock),1),a("div",oe,[a("div",ie,_(i.currency(r.form.price)),1)])]),n.data.variant.length>1?(t(),o(u,{key:0},[n.data.has_variant?(t(),o("div",ne,[l(E,{modelValue:r.form.variant_id,"onUpdate:modelValue":c[0]||(c[0]=e=>r.form.variant_id=e)},{default:s(()=>[(t(!0),o(u,null,f(n.data.variant,(e,d)=>(t(),o(u,{key:d},[n.grosir==1&&d>=1?(t(),h(y,{key:0,label:e.id,border:"",class:"me-2",onChange:N=>p.setVariantPrice(e.sell_price),disabled:!e.stock},{default:s(()=>[k(_(e.name),1)]),_:2},1032,["label","onChange","disabled"])):n.grosir==0&&d==0?(t(),h(y,{key:1,label:e.id,border:"",class:"me-2",onChange:N=>p.setVariantPrice(e.sell_price),disabled:!e.stock},{default:s(()=>[k(_(e.name),1)]),_:2},1032,["label","onChange","disabled"])):m("",!0)],64))),128))]),_:1},8,["modelValue"])])):m("",!0)],64)):m("",!0),a("div",le,[l(V,{modelValue:r.form.qty,"onUpdate:modelValue":c[1]||(c[1]=e=>r.form.qty=e),min:1,size:"large"},null,8,["modelValue"])]),l(w,{type:"primary",size:"large",onClick:j(p.addCart,["prevent"]),disabled:!r.stock},{default:s(()=>[re,k(" Tambah Keranjang ")]),_:1},8,["onClick","disabled"])]),_:1})]),_:1})])])]),_:1})]),_:1})])]),_:1},8,["title"])}const Ee=F(M,[["render",ce],["__scopeId","data-v-5295934b"]]);export{Ee as default};
