import{b0 as v,aC as m,bK as h,bL as z,at as G,bM as W,b5 as K,b9 as N,q as U,b4 as V,$ as x,bN as $,ap as j,bO as O,w as g,bP as q,bQ as Q,x as J,bR as Z,aW as E,ag as P,ah as A,X as F,G as ee,r as Y,V as oe}from"./id.js";import{g as te}from"./scroll.js";var l=(e=>(e[e.TEXT=1]="TEXT",e[e.CLASS=2]="CLASS",e[e.STYLE=4]="STYLE",e[e.PROPS=8]="PROPS",e[e.FULL_PROPS=16]="FULL_PROPS",e[e.HYDRATE_EVENTS=32]="HYDRATE_EVENTS",e[e.STABLE_FRAGMENT=64]="STABLE_FRAGMENT",e[e.KEYED_FRAGMENT=128]="KEYED_FRAGMENT",e[e.UNKEYED_FRAGMENT=256]="UNKEYED_FRAGMENT",e[e.NEED_PATCH=512]="NEED_PATCH",e[e.DYNAMIC_SLOTS=1024]="DYNAMIC_SLOTS",e[e.HOISTED=-1]="HOISTED",e[e.BAIL=-2]="BAIL",e))(l||{});const de=e=>{if(!m(e))return{};const s=e.props||{},t=(m(e.type)?e.type.props:void 0)||{},o={};return Object.keys(t).forEach(n=>{h(t[n],"default")&&(o[n]=t[n].default)}),Object.keys(s).forEach(n=>{o[z(n)]=s[n]}),o},b=e=>{const s=v(e)?e:[e],t=[];return s.forEach(o=>{var n;v(o)?t.push(...b(o)):m(o)&&v(o.children)?t.push(...b(o.children)):(t.push(o),m(o)&&((n=o.component)!=null&&n.subTree)&&t.push(...b(o.component.subTree)))}),t},le=(e,s,t)=>{let o={offsetX:0,offsetY:0};const n=a=>{const c=a.clientX,f=a.clientY,{offsetX:i,offsetY:p}=o,d=e.value.getBoundingClientRect(),y=d.left,T=d.top,D=d.width,_=d.height,k=document.documentElement.clientWidth,H=document.documentElement.clientHeight,B=-y+i,I=-T+p,R=k-y-D+i,X=H-T-_+p,M=L=>{const C=Math.min(Math.max(i+L.clientX-c,B),R),w=Math.min(Math.max(p+L.clientY-f,I),X);o={offsetX:C,offsetY:w},e.value.style.transform=`translate(${N(C)}, ${N(w)})`},S=()=>{document.removeEventListener("mousemove",M),document.removeEventListener("mouseup",S)};document.addEventListener("mousemove",M),document.addEventListener("mouseup",S)},r=()=>{s.value&&e.value&&s.value.addEventListener("mousedown",n)},u=()=>{s.value&&e.value&&s.value.removeEventListener("mousedown",n)};G(()=>{W(()=>{t.value?r():u()})}),K(()=>{u()})},me=(e,s={})=>{U(e)||V("[useLockscreen]","You need to pass a ref param to this function");const t=s.ns||x("popup"),o=$(()=>t.bm("parent","hidden"));if(!j||O(document.body,o.value))return;let n=0,r=!1,u="0";const a=()=>{setTimeout(()=>{Z(document==null?void 0:document.body,o.value),r&&document&&(document.body.style.width=u)},200)};g(e,c=>{if(!c){a();return}r=!O(document.body,o.value),r&&(u=document.body.style.width),n=te(t.namespace.value);const f=document.documentElement.clientHeight<document.body.scrollHeight,i=q(document.body,"overflowY");n>0&&(f||i==="scroll")&&r&&(document.body.style.width=`calc(100% - ${n}px)`),Q(document.body,o.value)}),J(()=>a())},ne=e=>{if(!e)return{onClick:E,onMousedown:E,onMouseup:E};let s=!1,t=!1;return{onClick:u=>{s&&t&&e(u),s=t=!1},onMousedown:u=>{s=u.target===u.currentTarget},onMouseup:u=>{t=u.target===u.currentTarget}}},se=P({mask:{type:Boolean,default:!0},customMaskEvent:{type:Boolean,default:!1},overlayClass:{type:A([String,Array,Object])},zIndex:{type:A([String,Number])}}),ue={click:e=>e instanceof MouseEvent},re="overlay";var ae=F({name:"ElOverlay",props:se,emits:ue,setup(e,{slots:s,emit:t}){const o=x(re),n=c=>{t("click",c)},{onClick:r,onMousedown:u,onMouseup:a}=ne(e.customMaskEvent?void 0:n);return()=>e.mask?ee("div",{class:[o.b(),e.overlayClass],style:{zIndex:e.zIndex},onClick:r,onMousedown:u,onMouseup:a},[Y(s,"default")],l.STYLE|l.CLASS|l.PROPS,["onClick","onMouseup","onMousedown"]):oe("div",{class:e.overlayClass,style:{zIndex:e.zIndex,position:"fixed",top:"0px",right:"0px",bottom:"0px",left:"0px"}},[Y(s,"default")])}});const fe=ae;export{fe as E,me as a,ne as b,b as f,de as g,le as u};
