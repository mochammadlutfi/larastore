import{_ as S,L as E,o as u,B as p,C as l,a as e,G as a,a5 as f,e as g,c as b,E as V,F as w,D as d,H as T,a7 as I,a8 as q,P,Q as j}from"./id.js";import{E as z}from"./index24.js";import{E as A}from"./index8.js";import{E as D}from"./index25.js";import{E as N}from"./index9.js";import"./event.js";import"./isEqual.js";import"./_Uint8Array.js";import"./typescript.js";import"./index22.js";import"./index26.js";const U={setup(){},data(){return{product:[],var1:null,var2:null,selected:[],selectAll:!1,voucher:[],carts:[]}},computed:{totalProduct(){var t=0;return this.selected.forEach((o,_)=>{this.carts.forEach((n,c)=>{o===n.id&&(t+=n.qty)})}),t},totalOrder(){var t=0;return this.selected.forEach((o,_)=>{this.carts.forEach((n,c)=>{o===n.id&&(t+=n.price*n.qty)})}),t}},async mounted(){await this.fetchData()},methods:{onSelectAll(t){t?(this.selected=[],this.carts.forEach((o,_)=>{this.selected.push(o.id)})):this.selected=[]},async fetchData(){try{this.isLoading=!0;const t=await axios.get("/cart/data",{});t.status==200&&(this.carts=t.data),this.isLoading=!1}catch(t){console.error(t)}},async updateCart(t,o){this.$inertia.form({id:t,qty:o}).post(this.route("cart.update"),{preserveScroll:!0})},checkout(){this.$inertia.form({cart:this.selected}).post(this.route("checkout.shipping"),{preserveScroll:!0})},removeSelected(){this.$swal.fire({icon:"warning",title:"Kamu Yakin?",text:`${this.selected.length} produk akan dihapus!`,showCancelButton:!0,cancelButtonText:"Tidak, Batal",confirmButtonText:"Ya, Hapus",confirmButtonColor:"#3f9ce8",cancelButtonColor:"#af1310"}).then(t=>{t.isConfirmed&&this.$inertia.post(this.route("cart.removeSelected"),{ids:this.selected},{preserveScroll:!0,resetOnSuccess:!1,onProgress:()=>{this.$swal.fire({title:"Tunggu Sebentar...",text:"",imageUrl:window._asset+"media/loading.gif",showConfirmButton:!1,allowOutsideClick:!1})},onSuccess:()=>(this.$swal.Close(),this.$swal.fire({icon:"success",title:"Berhasil",text:"Produk berhasil dihapus dari keranjang",showCancelButton:!1,showConfirmButton:!1})),onError:()=>{this.$swal.Close()}})})},remove(t){this.$swal.fire({icon:"warning",title:"Kamu Yakin?",text:"Semua produk yang dipilih akan dihapus!",showCancelButton:!0,cancelButtonText:"Tidak, Batal!",confirmButtonText:"Ya, Hapus!"}).then(o=>{o.isConfirmed&&this.$inertia.delete(this.route("cart.remove",t),{preserveScroll:!0,onSuccess:()=>(this.$swal.Close(),this.$swal.fire({icon:"success",title:"Berhasil",text:"Produk berhasil dihapus dari keranjang",showCancelButton:!1,showConfirmButton:!1}))})})}}},h=t=>(P("data-v-8df85691"),t=t(),j(),t),$={class:"content"},H=h(()=>e("div",{class:"content-heading"},[e("h2",{class:"mb-0"},"Keranjang")],-1)),L={class:"row"},O={class:"col-lg-8"},Y={class:"block"},K={class:"block-header block-header-default"},F={class:"block-title"},R={class:"block-options"},G=h(()=>e("i",{class:"si si-trash"},null,-1)),M={class:"block-content py-0"},Q={class:"custom-control custom-checkbox"},J=["id","value"],W=["for"],X={class:"cart-product_img"},Z=["src"],ee={class:"fs-6"},te=["href"],se={class:"fw-semibold"},oe={class:"fw-bold"},le={class:"product_sub_total"},ce=["onClick"],ae=h(()=>e("i",{class:"si si-trash"},null,-1)),ne=[ae],ie={class:"col-lg-4"},re={class:"block block-bordered block-shadow block-rounded"},de={class:"block-content block-content-full"},ue=h(()=>e("h6",{class:"font-size-h5"},"Ringkasan belanja",-1)),he={class:"d-flex justify-content-between"},_e={class:"font-size-md font-w600"},me={class:"font-size-md"},fe=h(()=>e("hr",null,null,-1));function pe(t,o,_,n,c,i){const y=z,k=T,r=A,v=D,C=N,x=E("base-layout");return u(),p(x,null,{default:l(()=>[e("div",$,[H,e("div",L,[e("div",O,[e("div",Y,[e("div",K,[e("div",F,[a(y,{modelValue:c.selectAll,"onUpdate:modelValue":o[0]||(o[0]=s=>c.selectAll=s),onChange:i.onSelectAll},{default:l(()=>[f(" Pilih Semua ")]),_:1},8,["modelValue","onChange"])]),e("div",R,[c.selected.length?(u(),p(k,{key:0,type:"danger",onClick:i.removeSelected},{default:l(()=>[G,f(" Hapus ")]),_:1},8,["onClick"])):g("",!0)])]),e("div",M,[(u(!0),b(w,null,V(c.carts,(s,B)=>(u(),p(C,{gutter:10,class:"cart-item",key:B},{default:l(()=>[a(r,{lg:1,class:"cart-item-check"},{default:l(()=>[e("label",Q,[I(e("input",{class:"custom-control-input",id:s.id,type:"checkbox",value:s.id,"onUpdate:modelValue":o[1]||(o[1]=m=>c.selected=m)},null,8,J),[[q,c.selected]]),e("label",{class:"custom-control-label",for:s.id},null,8,W)])]),_:2},1024),a(r,{lg:2},{default:l(()=>[e("div",X,[e("img",{src:s.product.main_image,class:"img-fluid"},null,8,Z)])]),_:2},1024),a(r,{lg:10},{default:l(()=>[e("div",ee,[e("a",{href:t.route("product.show",{slug:s.product.slug})},[e("span",se,d(s.product.name),1),s.variant.name?(u(),b(w,{key:0},[f(" - "+d(s.variant.name),1)],64)):g("",!0)],8,te)]),e("div",oe,d(t.currency(s.price)),1)]),_:2},1024),a(r,{lg:4,class:"text-end my-auto"},{default:l(()=>[a(v,{modelValue:s.qty,"onUpdate:modelValue":m=>s.qty=m,min:1,size:"small",class:"w-100"},null,8,["modelValue","onUpdate:modelValue"])]),_:2},1024),a(r,{lg:6,class:"text-end my-auto"},{default:l(()=>[e("div",le,d(t.currency(s.price*s.qty)),1)]),_:2},1024),a(r,{lg:1,class:"text-end my-auto"},{default:l(()=>[e("button",{class:"btn btn-danger btn-sm",onClick:m=>i.remove(s.id)},ne,8,ce)]),_:2},1024)]),_:2},1024))),128))])])]),e("div",ie,[e("div",re,[e("div",de,[ue,e("div",he,[e("div",_e,"Total Belanja ("+d(i.totalProduct)+" barang)",1),e("div",me,d(t.currency(i.totalOrder)),1)]),fe,a(k,{type:"primary",size:"large",class:"w-100",onClick:i.checkout,disabled:!c.selected.length},{default:l(()=>[f(" Checkout ")]),_:1},8,["onClick","disabled"])])])])])])]),_:1})}const Ve=S(U,[["render",pe],["__scopeId","data-v-8df85691"]]);export{Ve as default};
