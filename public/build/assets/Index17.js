import{_ as B,L as M,o as m,B as w,C as t,a as o,G as e,a7 as S,a5 as u,a6 as V,c as K,D as _,e as L,H as N,M as T,I as j,J as z}from"./id.js";import{E as P}from"./index30.js";import{E as Y}from"./index21.js";import{a as I,E as H}from"./index33.js";import{E as U}from"./index8.js";import{E as A}from"./index22.js";import{E as G}from"./index9.js";import{E as J,a as O}from"./index32.js";import{E as R}from"./index36.js";import{v as q}from"./directive.js";import"./index28.js";import"./scroll.js";import"./validator.js";import"./index7.js";import"./typescript.js";import"./index31.js";import"./event.js";import"./isEqual.js";import"./_Uint8Array.js";import"./debounce.js";import"./index34.js";import"./_initCloneObject.js";import"./index24.js";const F={data(){return{data:[],isLoading:!0,searchKey:"name",searchKeyword:"",limit:25,total:0,page:1,pageSize:0}},async created(){await this.fetchData()},methods:{async fetchData(a){var a=a??1;try{this.isLoading=!0;const l=await axios.get("/admin/pelanggan/data",{params:{page:a,limit:this.limit,search:this.searchKeyword,searchKey:this.searchKey}});l.status==200&&(this.data=l.data.data,this.page=l.data.current_page,this.total=l.data.total,this.pageSize=l.data.per_page),this.isLoading=!1}catch(l){console.error(l)}},format_date(s){if(s)return moment(String(s)).format("DD MMM YYYY")},hapus(s){P.alert("Data yang dihapus tidak bisa dikembalikan!","Peringatan",{showCancelButton:!0,confirmButtonText:"Ya!",cancelButtonText:"Tidak!",type:"warning"}).then(()=>{this.$inertia.delete(this.route("admin.sale.customer.delete",{id:s}),{preserveScroll:!0,onSuccess:()=>{this.fetchData(),Y({type:"success",message:"Data Berhasil Dihapus!"})}})})}}},Q={class:"content"},W=o("div",{class:"content-heading d-flex justify-content-between align-items-center"},[o("span",null,"Pelanggan"),o("div",{class:"space-x-1"})],-1),X={class:"block block-rounded"},Z={class:"block-content py-3"},$=o("i",{class:"fa fa-search"},null,-1),ee={class:"block-content p-0"},te=o("i",{class:"fa fa-angle-down ms-1"},null,-1),ae=["href"],oe=o("i",{class:"si fa-fw si-note"},null,-1),ne=o("i",{class:"si fa-fw si-trash"},null,-1),se={key:0,class:"block-content py-2"},le={class:"mb-0"};function ie(s,a,l,re,n,c){const p=I,b=H,d=U,f=N,y=A,h=G,r=J,g=T,k=j,E=z,v=O,x=R,C=M("base-layout"),D=q;return m(),w(C,null,{default:t(()=>[o("div",Q,[W,o("div",X,[o("div",Z,[e(h,{justify:"space-between"},{default:t(()=>[e(d,{span:12},{default:t(()=>[e(b,{modelValue:n.limit,"onUpdate:modelValue":a[0]||(a[0]=i=>n.limit=i),placeholder:"Pilih",style:{width:"115px"},onChange:a[1]||(a[1]=i=>c.fetchData(1))},{default:t(()=>[e(p,{label:"25",value:"25"}),e(p,{label:"50",value:"50"}),e(p,{label:"100",value:"100"})]),_:1},8,["modelValue"])]),_:1}),e(d,{span:8},{default:t(()=>[e(y,{modelValue:n.searchKeyword,"onUpdate:modelValue":a[3]||(a[3]=i=>n.searchKeyword=i),placeholder:"Masukan kata kunci",class:"input-with-select",clearable:""},{append:t(()=>[e(f,{onClick:a[2]||(a[2]=i=>c.fetchData(1))},{default:t(()=>[$]),_:1})]),_:1},8,["modelValue"])]),_:1})]),_:1})]),o("div",ee,[S((m(),w(v,{data:n.data,class:"table-click",style:{width:"100%"},onSortChange:s.sortChange},{default:t(()=>[e(r,{type:"index",index:s.indexMethod,width:"100"},null,8,["index"]),e(r,{prop:"name",label:"Nama",sortable:""}),e(r,{prop:"phone",label:"No HP",sortable:""}),e(r,{prop:"email",label:"Email",sortable:""}),e(r,{label:"Aksi",align:"center",width:"180"},{default:t(i=>[e(E,{"popper-class":"dropdown-action",trigger:"click"},{dropdown:t(()=>[e(k,null,{default:t(()=>[e(g,null,{default:t(()=>[o("a",{href:s.route("admin.sale.customer.edit",{id:i.row.id}),class:"w-100 d-flex align-items-center justify-content-between space-x-1"},[u(" Ubah "),oe],8,ae)]),_:2},1024),e(g,{class:"d-flex align-items-center justify-content-between space-x-1",onClick:V(ce=>c.hapus(i.row.id),["prevent"])},{default:t(()=>[u(" Hapus "),ne]),_:2},1032,["onClick"])]),_:2},1024)]),default:t(()=>[e(f,{type:"primary"},{default:t(()=>[u(" Aksi "),te]),_:1})]),_:2},1024)]),_:1})]),_:1},8,["data","onSortChange"])),[[D,n.isLoading]])]),n.isLoading==!1?(m(),K("div",se,[e(h,{justify:"space-between"},{default:t(()=>[e(d,{lg:12},{default:t(()=>[o("p",le,"Menampilkan "+_(s.from)+" sampai "+_(s.to)+" dari "+_(n.total),1)]),_:1}),e(d,{lg:12,class:"text-end"},{default:t(()=>[e(x,{class:"float-end",background:"",layout:"prev, pager, next","page-size":n.pageSize,total:n.total,"current-page":n.page,onCurrentChange:c.fetchData},null,8,["page-size","total","current-page","onCurrentChange"])]),_:1})]),_:1})])):L("",!0)])])]),_:1})}const Ne=B(F,[["render",ie]]);export{Ne as default};
